# Agent API Field Changes
# Feature: 043-rename-model-fields
# Date: 2025-12-31

# This document describes the API field name changes.
# No new endpoints are added - only existing field names are renamed.

field_changes:
  # AgentDTO response fields
  agent_dto:
    old_fields:
      - name: model
        type: string
        description: 模型名称
      - name: modelId
        type: string
        description: 完整模型 ID

    new_fields:
      - name: modelName
        type: string
        description: 模型友好名称（如 Claude Opus 4.5）
        example: "Claude Opus 4.5"
      - name: providerModelId
        type: string
        description: 模型提供商标识符（如 anthropic.claude-opus-4-5-20251124-v1:0）
        example: "anthropic.claude-opus-4-5-20251124-v1:0"

  # CreateAgentRequest fields
  create_agent_request:
    old_fields:
      - name: model
        type: string
      - name: modelId
        type: string

    new_fields:
      - name: modelName
        type: string
        required: false
        max_length: 100
      - name: providerModelId
        type: string
        required: false
        max_length: 200

  # UpdateAgentRequest fields
  update_agent_request:
    old_fields:
      - name: model
        type: string
      - name: modelId
        type: string

    new_fields:
      - name: modelName
        type: string
        required: false
        max_length: 100
      - name: providerModelId
        type: string
        required: false
        max_length: 200

# Affected endpoints (field names change in request/response):
affected_endpoints:
  - method: POST
    path: /api/service/v1/agents/create
    change: Request body field names

  - method: POST
    path: /api/service/v1/agents/update
    change: Request body field names

  - method: POST
    path: /api/service/v1/agents/query-by-id
    change: Response field names

  - method: POST
    path: /api/service/v1/agents/query-page
    change: Response field names in list items

  - method: POST
    path: /api/service/v1/agent-bounds/query-hierarchy
    change: Response field names in nested Agent objects

# Breaking change notice
breaking_changes:
  - description: |
      API 响应中的 `model` 字段重命名为 `modelName`
      API 响应中的 `modelId` 字段重命名为 `providerModelId`
      前端需要相应更新字段访问代码
    migration_guide: |
      Before: agent.model, agent.modelId
      After:  agent.modelName, agent.providerModelId
