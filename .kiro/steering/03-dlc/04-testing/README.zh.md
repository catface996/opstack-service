---
inclusion: manual
---
# 测试最佳实践

## 概述

本目录包含软件开发生命周期中各类测试的最佳实践指南，帮助团队建立完善的测试体系。每个文档都遵循统一的结构，包含：触发词映射、NON-NEGOTIABLE 规则、执行步骤、Gate Check 验证清单、输出格式模板。

---

## 触发词映射

| 用户表达 | 对应测试类型 | 跳转文档 |
|---------|-------------|----------|
| 评审需求/审查需求 | 需求静态测试 | 00-static-review |
| 写单元测试/单测 | 单元测试 | 01-unit |
| 写集成测试 | 集成测试 | 02-integration |
| E2E 测试/端到端测试 | E2E 测试 | 03-e2e |
| API 测试/接口测试 | API 测试 | 04-api |
| 性能测试/压力测试 | 性能测试 | 05-performance |
| 安全测试/安全审计 | 安全测试 | 06-security |
| 兼容性测试/跨浏览器 | 兼容性测试 | 07-compatibility |
| 回归测试 | 回归测试 | 08-regression |

---

## 目录结构

```
04-testing/
├── 00-static-review/  # 需求静态测试（左移测试）
├── 01-unit/           # 单元测试
├── 02-integration/    # 集成测试
├── 03-e2e/           # 端到端测试
├── 04-api/           # API 测试
├── 05-performance/   # 性能测试
├── 06-security/      # 安全测试
├── 07-compatibility/ # 兼容性测试
└── 08-regression/    # 回归测试
```

## 测试金字塔与左移测试

```
    需求静态测试 ──────────────────► 编码前发现问题（成本最低）
         │
         ▼
        /\
       /  \      E2E 测试 (少量)
      /----\
     /      \    集成测试 (适量)
    /--------\
   /          \  单元测试 (大量)
  /------------\
```

**左移测试原则**：测试活动尽早介入，在需求阶段就发现问题，缺陷发现越早，修复成本越低。

## 测试类型说明

| 类型 | 目的 | 执行时机 | 覆盖范围 |
|------|------|----------|----------|
| 需求静态测试 | 发现需求歧义和遗漏 | 编码前 | 所有需求 |
| 单元测试 | 验证单个函数/类的行为 | 每次提交 | 70-80% |
| 集成测试 | 验证模块间的交互 | 每次提交 | 关键路径 |
| E2E 测试 | 验证完整用户流程 | 每日/PR | 核心流程 |
| API 测试 | 验证接口契约 | 每次提交 | 所有接口 |
| 性能测试 | 验证系统性能指标 | 定期/发布前 | 关键接口 |
| 安全测试 | 发现安全漏洞 | 定期/发布前 | 全系统 |
| 兼容性测试 | 验证跨环境兼容性 | 发布前 | 目标环境 |
| 回归测试 | 验证已有功能未被破坏 | 每次发布 | 全量功能 |

## 测试策略原则

1. **尽早测试** - 在开发过程中持续进行测试
2. **自动化优先** - 尽可能自动化测试用例
3. **快速反馈** - 保持测试执行速度
4. **隔离性** - 测试之间相互独立
5. **可重复性** - 测试结果可稳定复现
6. **可维护性** - 测试代码同样需要维护

## 推荐工具

### 后端 (Java)
- 单元测试: JUnit 5, Mockito
- 集成测试: Spring Boot Test, Testcontainers
- API 测试: REST Assured
- 性能测试: JMeter, Gatling

### 前端 (JavaScript/TypeScript)
- 单元测试: Jest, Vitest
- 组件测试: React Testing Library
- E2E 测试: Playwright (推荐), Cypress
- 性能测试: Lighthouse

---

## NON-NEGOTIABLE 全局规则

以下规则适用于所有测试类型：

1. **MUST** 测试代码与生产代码同等重要，需要维护
2. **MUST** 遵循测试金字塔原则（单元 70% > 集成 20% > E2E 10%）
3. **MUST** 测试方法命名清晰描述场景
4. **NEVER** 忽略失败的测试
5. **NEVER** 编写无断言的测试
6. **STRICTLY** 测试间相互独立，无执行顺序依赖

---

## 文档结构说明

每个子目录的 README.md 包含：

| 章节 | 说明 |
|------|------|
| 角色设定 | AI 扮演的专家角色 |
| 触发词映射 | 用户表达 → 动作 → 输出物 |
| NON-NEGOTIABLE 规则 | 必须遵守的规则（MUST/NEVER/STRICTLY） |
| 核心原则 | 该测试类型的核心概念和定位 |
| 具体规则 | 详细的执行规则和检查清单 |
| 执行步骤 | 分步骤的执行流程 |
| Gate Check 验证清单 | 完成前必须确认的检查点 |
| 输出格式模板 | 标准化的输出格式 |
| 提示词模板 | 可直接使用的提示词 |
| 最佳实践清单 | 快速参考的检查列表 |

---

## 使用指南

1. **识别测试需求**：根据触发词映射确定需要的测试类型
2. **参考对应文档**：进入对应子目录查看详细指南
3. **遵循 NON-NEGOTIABLE 规则**：确保满足强制性要求
4. **使用提示词模板**：直接使用或修改模板与 AI 交互
5. **执行 Gate Check**：完成前确认所有检查点
